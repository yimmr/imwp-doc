# 演示数据管理

{% hint style="info" %}
本节包含的功能处于试行阶段，后续可能会单独发布
{% endhint %}

### 概要

这是一个插件框架，用于制作管理主题或其他插件演示数据的插件，核心功能是实现演示数据的一键/选择填充和删除。

**框架基本目录结构：**

* actions  主要开发目录
* languages  多语言目录
* src  框架核心功能目录
* logs  目录下的文件用于标记已填充的数据（框架自动创建不用管）
* index.php  入口文件
* 其他相关文件

{% hint style="info" %}
框架可以自动创建 `logs` 目录，填充数据后会在目录下写入文件进行登记。有以下几点需要注意：

* 新插件要删除这个目录；
* 目录存在文件时不能盲目删除，删除就不能跟踪或删除新增的数据；
* 目录为空时可以删除；
{% endhint %}

### 开发思路

主要任务是调用框架接口实现填充数据的功能，一般不用写删除数据的代码，这由框架自动处理。框架提供的接口无法实现需求时可参考[自定义](yan-shi-shu-ju-guan-li.md#undefined)一栏扩展功能。

**任务文件**

插件 `actions` 目录下的 `json` 文件称为任务文件，文件名可以用中文或短横分隔的英文单词。

* 应使用能描述所填充数据的短语做文件名；
* 每个文件的职责是填充一组特定数据，根据需求自由组织；
* **任务文件独立且不存在依赖关系**，即使填充数据前要先填充其他数据，也是用一个任务文件实现；
* 文件内容是 `json` 对象，对象属性用于创建PHP变量，但 `steps` 和 `inc` 属性有其它用途；

任务文件是用 `json` 格式写填充数据的PHP变量和代码（未来可能不直接写代码），同时也是将数据和代码整合一起，这在填充简单数据时很方便，此时代码也比较少，不用担心可读性；

填充数据的代码写到 `steps` 属性，属性值支持字符串或字符串数组，数组即每行代码一个值。代码量大时，可以迁移到 `actions/inc` 目录下的PHP文件，然后 `inc` 属性写PHP文件名。这两个属性二选一，如果存在 `inc` 则只引入PHP文件不执行 `steps` 代码。

禁用的对象属性（内部创建对应名称的变量）：

* manager  管理者对象，可调用方法拼接路径
* modelSave  保存数据对象
* media  媒体库上传等功能对象
* Multiple  静态类，可调用方法按规则重复创建 n 条数据

### 自定义

###
